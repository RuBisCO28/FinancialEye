<!doctype html>
<html lang="ja">
<html>
  <head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
	<title>Financial Eye 360 - {{title}}</title>
  </head>
  <body>
    <nav class="navbar navbar-dark bg-primary mb-2">
	  <a href="/index" class="navbar-brand">
        <img src="../static/eye.png" width="30" height="30" alt="">
        Financial Eye 360
      </a>
	  <form action="/search" method="GET" class="form-inline">
        <div class="input-group">
        <input type="text" class="form-control" name="code" id="text5a" placeholder="銘柄コード">
        <div class="input-group-append">
          <button type="submit" class="btn btn-secondary">検索</button>
        </div>
        </div>
      </form>
    </nav>
    <div class="container">
	
    {% for edinetcodeinfo in all_edinetcodeinfo %}
		<table class="table">
		<tr>
			<th>会社名 (銘柄コード)</th>
			<td>{{edinetcodeinfo.submitter}} 【{{edinetcodeinfo.securitiescode}}】</td>
		</tr>
		<tr>
			<th>業種</th>
			<td>{{edinetcodeinfo.businesstype}}</td>
		</tr>
		<tr>
			<th>資本金(百万円)</th>
			<td>{{edinetcodeinfo.capital}}</td>
		</tr>
		<tr>
			<th>決算月</th>
			<td>{{edinetcodeinfo.fiscalperiod}}</td>
		</tr>
		<tr>
			<th>特色</th>
			<td>-</td>
		</tr>
		</table>
	{% endfor %}
	

    <div class="row">
      <div class="col-md-6">
        <canvas id="saleschart" width="600" height="400"></canvas>
      </div>
	  <div class="col-md-6">
        <canvas id="profitchart" width="600" height="400"></canvas>
      </div>
	  <div class="col-md-12">
        <table class="table">
		<thead class="thead-light">
		 <th class="fixed-column-0">P/L</th>
		 {% for financeinfo in all_financeinfo %}
             <th>{{financeinfo.enddate}}</th>
         {% endfor %}
		</thead>
		<tbody>
		<tr>
			<th>売上高</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.netsales}}</td>
			{% endfor %}
		</tr>
		<tr>
			<th>売上原価</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.costofsales}}</td>
			{% endfor %}
		</tr>
		<tr>
			<th>売上総利益</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.grossprofit}}</td>
			{% endfor %}
		</tr>
		<tr>
			<th>販管費</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.sellinggeneral}}</td>
			{% endfor %}
		</tr>
		<tr>
			<th>営業利益</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.operatingincome}}</td>
			{% endfor %}
		</tr>
		<tr>
			<th>営業外収益</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.nonoperatingincome}}</td>
			{% endfor %}
		</tr>
		<tr>
			<th>営業外費用</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.nonoperatingexpenses}}</td>
			{% endfor %}
		</tr>
		<tr>
			<th>経常利益</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.ordinaryIncome}}</td>
			{% endfor %}
		</tr>
		<tr>
			<th>特別利益</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.extraordinaryincome}}</td>
			{% endfor %}
		</tr>
		<tr>
			<th>特別損失</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.extraordinaryloss}}</td>
			{% endfor %}
		</tr>
		<tr>
			<th>税引前当期純利益</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.incomebeforeincometaxes}}</td>
			{% endfor %}
		</tr>
		<tr>
			<th>法人税等</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.incometaxes}}</td>
			{% endfor %}
		</tr>
		<tr>
			<th>当期純利益</th>
			{% for financeinfo in all_financeinfo %}
			<td>{{financeinfo.profitloss}}</td>
			{% endfor %}
		</tr>
		</tbody>
		</table>
      </div>
    </div>


	<script>
var barData = {
  labels : [{% for financeinfo in all_financeinfo %}
            "{{financeinfo.enddate}}",
        {% endfor %}],
  datasets : [{
    label: '売上高',
    backgroundColor: 'rgba(255, 99, 132, 0.2)',
    borderColor: 'rgba(255,99,132,1)',
    borderWidth:10,
    data : [{% for financeinfo in all_financeinfo %}
                  {{financeinfo.netsales}},
                {% endfor %}]
  }]
}
var mychart = document.getElementById("saleschart");
var chart = new Chart(mychart, {
  type:'bar',
  data:barData,
  options: {
      title: {
        display: true,
        text: '売上高(百万円)'
      },
	  scales: {
        yAxes: [{
          ticks: {
            //suggestedMax: Math.max(values) / 1000000,
            suggestedMin: 0,
            //stepSize: 10,
            callback: function(value, index, values){
              return  value
            }
          }
        }]
      }
  }
});
</script>

	</div>
	
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
  </body>
</html>